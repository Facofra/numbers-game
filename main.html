<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Adivinanza de N√∫meros</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .game-controls {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .input-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        #numberInput {
            padding: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-size: 1.2rem;
            width: 150px;
            text-align: center;
            transition: border-color 0.3s;
        }

        #numberInput:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #e53e3e;
            color: white;
            margin-left: 10px;
        }

        .btn-secondary:hover {
            background: #c53030;
            transform: translateY(-2px);
        }

        .message {
            text-align: center;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
        }

        .message.success {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #48bb78;
        }

        .message.info {
            background: #bee3f8;
            color: #2c5282;
            border: 2px solid #4299e1;
        }

        .message.warning {
            background: #fef5e7;
            color: #744210;
            border: 2px solid #ed8936;
        }

        .matrix-container {
            margin-top: 30px;
            overflow: auto;
            max-height: 600px;
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            background: #f9f9f9;
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            background: white;
        }

        .matrix-table th {
            background: #667eea;
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #5a67d8;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .matrix-table th:first-child {
            background: #764ba2;
            position: sticky;
            left: 0;
            z-index: 11;
            min-width: 150px;
            text-align: left;
            padding-left: 15px;
        }

        .matrix-table td {
            padding: 10px 8px;
            text-align: center;
            border: 1px solid #ddd;
            font-size: 16px;
        }

        .matrix-table td:first-child {
            background: #f8f9fa;
            font-weight: bold;
            text-align: left;
            padding-left: 15px;
            position: sticky;
            left: 0;
            z-index: 9;
            border-right: 2px solid #667eea;
        }

        .matrix-table .check-mark {
            color: #28a745;
            font-size: 18px;
            font-weight: bold;
        }

        .matrix-table .cross-mark {
            color: #6c757d;
            font-size: 16px;
        }

        .matrix-table .secret-number {
            background: #fff3cd;
            font-weight: bold;
            color: #856404;
        }

        .matrix-table .guessed-number {
            background: #d1ecf1;
            color: #0c5460;
        }

        .empty-state {
            text-align: center;
            color: #999;
            font-size: 1.2rem;
            margin: 50px 0;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ÔøΩ Juego de Adivinanza de N√∫meros</h1>
        <p class="subtitle">Adivina el n√∫mero secreto (1-100) y descubre las categor√≠as que comparten</p>
        
        <div class="game-controls">
            <div class="input-group">
                <input type="number" id="numberInput" min="1" max="100" placeholder="Tu n√∫mero">
                <button class="btn btn-primary" id="guessBtn">Adivinar</button>
                <button class="btn btn-secondary" id="resetBtn">Nuevo Juego</button>
            </div>
        </div>

        <div id="message" class="message" style="display: none;"></div>

        <div class="matrix-container" id="matrixContainer">
            <div class="empty-state">
                Ingresa tu primer n√∫mero para comenzar a revelar las categor√≠as compartidas
            </div>
        </div>
    </div>

    <script>
        class NumberGuessingGame {
            constructor() {
                this.categories = {
                    'perfecto': [6, 28],
                    'cubo_perfecto': [1, 8, 27, 64],
                    'divisor': [],
                    'altamente_compuesto': [1, 2, 4, 6, 12, 24, 36, 48, 60],
                    'pronic_number': [2, 6, 12, 20, 30, 42, 56, 72, 90],
                    'fibonacci': [1, 2, 3, 5, 8, 13, 21, 34, 55, 89],
                    'cuadrado_perfecto': [1, 4, 9, 16, 25, 36, 49, 64, 81, 100],
                    'multiplo_9': [9, 18, 27, 36, 45, 54, 63, 72, 81, 90, 99],
                    'multiplo_8': [8, 16, 24, 32, 40, 48, 56, 64, 72, 80, 88, 96],
                    'triangular': [1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, 78, 91],
                    'multiplo_7': [7, 14, 21, 28, 35, 42, 49, 56, 63, 70, 77, 84, 91, 98],
                    'multiplo_6': [6, 12, 18, 24, 30, 36, 42, 48, 54, 60, 66, 72, 78, 84, 90, 96],
                    'palindrome': [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 22, 33, 44, 55, 66, 77, 88, 99],
                    'numero_feliz': [10, 13, 19, 23, 28, 31, 32, 44, 49, 68, 70, 79, 82, 86, 91, 94, 97, 100],
                    'multiplo_5': [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100],
                    'abundante': [12, 18, 20, 24, 30, 36, 40, 42, 48, 54, 56, 60, 66, 70, 72, 78, 80, 84, 88, 90, 96, 100],
                    'harshad': [10, 12, 18, 20, 21, 24, 27, 30, 36, 40, 42, 45, 48, 50, 54, 60, 63, 70, 72, 80, 81, 84, 90, 100],
                    'primo': [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97],
                    'multiplo_4': [4, 8, 12, 16, 20, 24, 28, 32, 36, 40, 44, 48, 52, 56, 60, 64, 68, 72, 76, 80, 84, 88, 92, 96, 100],
                    'multiplo_3': [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99],
                    'numero_regular': [1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50, 54, 60, 64, 72, 75, 80, 81, 90, 96, 100],
                    'semi_primo': [4, 6, 9, 10, 14, 15, 21, 22, 25, 26, 33, 34, 35, 38, 39, 46, 49, 51, 55, 57, 58, 62, 65, 69, 74, 77, 82, 85, 86, 87, 91, 93, 94, 95],
                    'par': [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100],
                    'impar': [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51, 53, 55, 57, 59, 61, 63, 65, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85, 87, 89, 91, 93, 95, 97, 99],
                    'compuesto': [4, 6, 8, 9, 10, 12, 14, 15, 16, 18, 20, 21, 22, 24, 25, 26, 27, 28, 30, 32, 33, 34, 35, 36, 38, 39, 40, 42, 44, 45, 46, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 60, 62, 63, 64, 65, 66, 68, 69, 70, 72, 74, 75, 76, 77, 78, 80, 81, 82, 84, 85, 86, 87, 88, 90, 91, 92, 93, 94, 95, 96, 98, 99, 100],
                    'deficiente': [1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19, 21, 22, 23, 25, 26, 27, 29, 31, 32, 33, 34, 35, 37, 38, 39, 41, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 55, 57, 58, 59, 61, 62, 63, 64, 65, 67, 68, 69, 71, 73, 74, 75, 76, 77, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 97, 98, 99],
                    'natural': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]
                };

                this.secretNumber = this.generateSecretNumber();
                this.guessedNumbers = [];
                this.adjacencyMatrix = {};
                this.gameWon = false;

                this.initializeDivisorCategory();
                this.initializeEventListeners();
                this.showMessage('¬°Nuevo juego iniciado! Adivina el n√∫mero secreto.', 'info');
            }

            generateSecretNumber() {
                return Math.floor(Math.random() * 100) + 1;
            }

            initializeDivisorCategory() {
                this.categories.divisor = [];
                for (let n = 1; n <= 100; n++) {
                    if (this.secretNumber % n === 0) {
                        this.categories.divisor.push(n);
                    }
                }
                this.adjacencyMatrix[this.secretNumber] = {};
            }

            initializeEventListeners() {
                const numberInput = document.getElementById('numberInput');
                const guessBtn = document.getElementById('guessBtn');
                const resetBtn = document.getElementById('resetBtn');

                guessBtn.addEventListener('click', () => this.makeGuess());
                resetBtn.addEventListener('click', () => this.resetGame());
                
                numberInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.makeGuess();
                    }
                });
            }

            makeGuess() {
                const input = document.getElementById('numberInput');
                const guess = parseInt(input.value);

                if (!this.isValidGuess(guess)) return;

                if (guess === this.secretNumber) {
                    this.gameWon = true;
                    this.showMessage(`üéâ ¬°Felicitaciones! Adivinaste el n√∫mero ${this.secretNumber}!`, 'success');
                    this.updateMatrix();
                    input.value = '';
                    return;
                }

                if (this.guessedNumbers.includes(guess)) {
                    this.showMessage('Ya probaste ese n√∫mero', 'warning');
                    return;
                }

                // Buscar categor√≠as compartidas
                const sharedCategories = this.findSharedCategories(guess, this.secretNumber);
                
                if (sharedCategories.length > 0) {
                    this.guessedNumbers.push(guess);
                    this.updateAdjacencyMatrix(guess, sharedCategories);
                    this.updateMatrix();
                } else {
                    this.showMessage(`El n√∫mero ${guess} no comparte categor√≠as con el n√∫mero secreto`, 'info');
                }

                input.value = '';
            }

            isValidGuess(guess) {
                if (isNaN(guess) || guess < 1 || guess > 100) {
                    this.showMessage('Por favor ingresa un n√∫mero v√°lido entre 1 y 100', 'warning');
                    return false;
                }

                if (this.gameWon) {
                    this.showMessage('¬°Ya ganaste! Usa "Nuevo Juego" para comenzar otra partida', 'info');
                    return false;
                }

                return true;
            }

            findSharedCategories(guess, secret) {
                const shared = [];
                for (const [category, members] of Object.entries(this.categories)) {
                    if (members.includes(secret) && members.includes(guess)) {
                        shared.push(category);
                    }
                }
                return shared;
            }

            updateAdjacencyMatrix(guess, sharedCategories) {
                // Agregar nueva categor√≠a encontrada
                for (const category of sharedCategories) {
                    // Actualizar todas las entradas existentes con esta nueva categor√≠a
                    for (const number in this.adjacencyMatrix) {
                        const num = parseInt(number);
                        this.adjacencyMatrix[number][category] = this.categories[category].includes(num);
                    }

                    // Crear entrada para el nuevo guess
                    if (!this.adjacencyMatrix[guess]) {
                        this.adjacencyMatrix[guess] = {};
                    }

                    // Llenar el guess con todas las categor√≠as existentes
                    for (const existingCategory in this.adjacencyMatrix[this.secretNumber]) {
                        this.adjacencyMatrix[guess][existingCategory] = this.categories[existingCategory].includes(guess);
                    }

                    // Agregar la nueva categor√≠a al guess
                    this.adjacencyMatrix[guess][category] = true;
                }

                // Ordenar las categor√≠as seg√∫n el orden original
                const categoryOrder = Object.keys(this.categories);
                for (const number in this.adjacencyMatrix) {
                    const sortedCategories = {};
                    categoryOrder.forEach(cat => {
                        if (this.adjacencyMatrix[number][cat] !== undefined) {
                            sortedCategories[cat] = this.adjacencyMatrix[number][cat];
                        }
                    });
                    this.adjacencyMatrix[number] = sortedCategories;
                }
            }

            updateMatrix() {
                const container = document.getElementById('matrixContainer');
                
                if (Object.keys(this.adjacencyMatrix).length === 0 || 
                    Object.keys(this.adjacencyMatrix[this.secretNumber]).length === 0) {
                    container.innerHTML = '<div class="empty-state">Ingresa tu primer n√∫mero para comenzar a revelar las categor√≠as compartidas</div>';
                    return;
                }

                const numbers = Object.keys(this.adjacencyMatrix);
                const categories = Object.keys(this.adjacencyMatrix[this.secretNumber]);

                let html = '<table class="matrix-table fade-in">';
                
                // Header
                html += '<thead><tr><th>Categor√≠a</th>';
                numbers.forEach(num => {
                    const displayNum = (num == this.secretNumber && !this.gameWon) ? 'x' : num;
                    const cellClass = num == this.secretNumber ? 'secret-number' : 'guessed-number';
                    html += `<th class="${cellClass}">${displayNum}</th>`;
                });
                html += '</tr></thead>';

                // Body
                html += '<tbody>';
                categories.forEach(category => {
                    html += `<tr><td>${category}</td>`;
                    numbers.forEach(num => {
                        const value = this.adjacencyMatrix[num][category];
                        const symbol = value ? '<span class="check-mark">‚úî</span>' : '<span class="cross-mark">¬∑</span>';
                        const cellClass = num == this.secretNumber ? 'secret-number' : 'guessed-number';
                        html += `<td class="${cellClass}">${symbol}</td>`;
                    });
                    html += '</tr>';
                });
                html += '</tbody>';

                html += '</table>';
                container.innerHTML = html;
            }

            showMessage(text, type) {
                const messageEl = document.getElementById('message');
                messageEl.textContent = text;
                messageEl.className = `message ${type} fade-in`;
                messageEl.style.display = 'block';
                
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 4000);
            }

            resetGame() {
                this.secretNumber = this.generateSecretNumber();
                this.guessedNumbers = [];
                this.adjacencyMatrix = {};
                this.gameWon = false;
                
                this.initializeDivisorCategory();
                
                document.getElementById('message').style.display = 'none';
                document.getElementById('numberInput').value = '';
                
                this.updateMatrix();
                this.showMessage('¬°Nuevo juego iniciado! Adivina el n√∫mero secreto.', 'info');
            }
        }

        // Inicializar el juego cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            new NumberGuessingGame();
        });
    </script>
</body>
</html>
